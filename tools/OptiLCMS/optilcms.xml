<tool id="OptiLCMS" name="OptiLCMS - PerformParamsOptimization" version="0.1.0+OptiLCMS@TOOL_VERSION@-galaxy@VERSION_SUFFIX@" profile="23.0">
    <description>Auto-optimization of parameters</description>
        <requirements>
        <requirement type="package" version="4.3.3">r-base</requirement>
        <requirement type="package" version="?">r-optilcms</requirement> <!-- Package github https://github.com/xia-lab/OptiLCMS -->
        <requirement type="package" version="1.0.0">r-w4mrutils</requirement>
    </requirements>
    <command detect_errors="exit_code">
    <![CDATA[
    
    Rscript '$__tool_directory__/optilcms.R'

    image '$image'
    platform '$platform'
    ncore '$ncore'
    rt_idx '$rt_idx'
    rmConts '$rmConts'
    
    ]]></command>
  
  
    <inputs>
        <param name="image" type="data" label="collection de fichiers" format="?"/>
        <param name="platform" type="select" display="radio" label="Type of concatenation">
            <option value="general">general</option>
            <option value="UPLC-Q/E">UPLC-Q/E</option>
            <option value="UPLC-Q/TOF">UPLC-Q/TOF</option>
            <option value="UPLC-T/TOF">UPLC-T/TOF</option>
            <option value="UPLC-Ion_Trap">UPLC-Ion_Trap</option>
            <option value="UPLC-Orbitrap">UPLC-Orbitrap</option>
            <option value="UPLC-G2S">UPLC-G2S</option>
            <option value="HPLC-Q/TOF">HPLC-Q/TOF</option>
            <option value="HPLC-Ion_Trap">HPLC-Ion_Trap</option>
            <option value="HPLC-Orbitrap">HPLC-Orbitrap</option>
            <option value="HPLC-S/Q">HPLC-S/Q</option>
        </param>
        <param name="ncore" type="integer" value="1" max="4" min="1" label="MulticoreParam - Enable parallel computing" />
        <param name="rt_idx" type="float" value="0.9" max="1" min="0" label="The relative retention time range" />
        <param name="rmConts" type="select" label="Use a personal ruleset file">
            <option value="TRUE" selected="true">TRUE</option>
            <option value="FALSE">FALSE</option>
        </param>
    </inputs>
  
    <outputs>
        <data name="chromatogram" label="chromatogram" format="image"></data>
        <data name="optimized_parameters_txt" label="optimized_parameters" format="tabular"></data>
    </outputs>
  
    <tests>
        <test>
            <param name="image" type="data" label="collection of files" format="mzXML,CDF,mzML"/>
            <param name="platform" type="select" display="radio" label="Type of concatenation">
            <param name="ncore" type="integer" value="1" max="4" min="1" label="MulticoreParam - Enable parallel computing" />
        
            <output name="chromatogram" file="chromatogram.png"/>
            <output name="optimized_parameters_txt" file="optimized_parameters.txt"/>
        </test>
    </tests>
  
    <help><![CDATA[
    
====================================
OptiLCMS - PerformParamsOptimization
====================================

-----------
Description
-----------

.. _link: https://rdrr.io/github/xia-lab/OptiLCMS/man/PerformROIExtraction.html

This function performs the raw data trimming. This function will output an trimmed 
MSnExp file to memory or hardisk according to the choice of users must provide the 
data path for 'datapath', and optionally provide other corresponding parameters.

---------------------------------------------------

---------
Arguments
---------

+----------------+--------------------------------------------------------------------------------------------------------------------------+
|Variables       |Descriptions                                                                                                              |
+================+==========================================================================================================================+
|datapath        |Character, the path of the raw MS data files' or folder's path (.mzXML, .CDF and .mzML) for parameters training.          |
+----------------+--------------------------------------------------------------------------------------------------------------------------+
|rt.idx          |Numeric, the relative retention time range, from 0 to 1. 1 means all retention time will be retained, while 0 means none. |
+----------------+--------------------------------------------------------------------------------------------------------------------------+
|rmConts         |LOgical, whether to exclude/remove the potential contamination for parameters optimization. Default is TRUE.              |
+----------------+--------------------------------------------------------------------------------------------------------------------------+

    ]]></help>
    <citations>
        <citation type="doi">10.1021/ac202450g</citation>
        <citation type="doi">10.1093/bioinformatics/btu813</citation>
    </citations>

    <creator>
        <organization name="MELISA" url="https://www.laberca.org/plateforme-melisa/presentation"></organization>
        <organization name="Workflow4metabolomics" url="https://workflow4metabolomics.org/"></organization>

        <person givenName="Yann" familyName="Guitton" url="https://github.com/yguitton"></person>
        <person givenName="Damien" familyName="Rat" url="https://github.com/DamienCode404"></person>
        <person givenName="Julien" familyName="Saint-Vanne" url="https://github.com/jsaintvanne"></person>
    </creator>
</tool>